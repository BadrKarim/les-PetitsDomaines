{% extends 'base.html.twig' %}

{% block title %}Mon panier - Les Petits Domaines{% endblock %}

{% block content %}

    <h1>Mon panier</h1>
    Retrouvez l'ensemble des produits que vous avez ajouté à votre panier.
    <hr>
    {# {{ dump(cart) }} #}
    <table class="table mt-3">
      <thead>
        <tr>
          <th scope="col">Produits</th>
          <th scope="col"></th>
          <th scope="col">Quantité</th>
          <th scope="col">Prix</th>
          <th scope="col">Total</th>
        </tr>
      </thead>
    <tbody>
      {% set total = null %}
      {% for product in cart %}
      {# {{ dump(product) }} #}
        <tr>
          <th>
          <img src=" /illustrations/{{ product.product.illustration }} " alt=" {{ product.product.name }} " height="75px"><br>
          
          </th>
          <td>
            <span>{{ product.product.name }}</span><br>
            <small>{{ product.product.subtitle }}</small>
          </td>
          <td>{{ product.quantity }}</td>
          <td>{{ (product.product.price / 100)|number_format(2, ',','.') }} € </td>
          <td>{{ (product.product.price * product.quantity / 100)|number_format(2, ',','.') }} € </td>
        </tr>
        {% set total = total + (product.product.price * product.quantity) %}
      {% endfor %}
    </tbody>
</table> 
<div class="text-right mb-5">
  <b>Nombre de produits : </b>{{ cart|length }}<br>
  <b>Totla de mon panier</b>{{ (total / 100)|number_format(2, ',','.') }} €
  <a href="" class="btn btn-sucess btn-block">Valider mon panier</a>
</div>

{% endblock %}
