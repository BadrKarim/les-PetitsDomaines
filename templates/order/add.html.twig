{% extends 'base.html.twig' %}

{% block title %}Valider ma commande - Les Petits Domaines{% endblock %}

{% block content %}

    <h1> Je passe ma commande </h1>
    <p> Choisissez vos préferences avant de passer votre commande sur les petits domaines</p>
    <hr>
    <div class="row">
        <div class="col-md-6">

        mon adresse de livraison<br/>
        mon transporteur

        </div>  


        <div class="col-md-6">

            <div class="text-center">
                <b>Récap de ma commande</b><br/>
                <p>Retrouvez le récapulatif de vos produits</p>
            </div>

            {# {{ dump(cart) }} #}
            <div class="order-summary">
            {% set total = null %}
            {% for key, product in cart %} 
            {# {{ dump(product) }} #}
                        <div class="row {% if key > 0 %} m-t2 {% endif %}">
                            <div class="col-2"> 
                                <img src=" /illustrations/{{ product.product.illustration }} " alt=" {{ product.product.name }} " height="75px">
                            </div>
                            <div class="col-8 my-auto">
                                {{ product.product.name }}<br>
                                <small>
                                    {{ product.product.subtitle }}
                                    <br/>
                                    x {{ product.quantity }}
                                </small>
                            </div>
                            <div class"col-2 my-auto">
                                {{ (product.product.price * product.quantity / 100)|number_format(2, ',','.') }} €
                            </div>
                        </div>
                     {% set total = total + (product.product.price * product.quantity) %}
            {% endfor %}
            </div>
            {# {{ dump(carrier) }} #}
            <hr>


            <strong>Sous-Total : {{ (total / 100)|number_format(2, ',','.') }} €</strong><br/>

            {# <strong>Livraison : {{ carriers.carrier.price|number_format(2, ',','.') }} €</strong> #}

            <hr>
            <strong>Total : </strong>
            
            <a href="" class="btn btn-success btn-block mt-3">Payer</a>

        </div>
    </div>

{% endblock %}
